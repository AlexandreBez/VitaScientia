<!-- Criar pesquisa -->
<div class="modal fade" id="modalNovaPesquisa" data-bs-backdrop="static" data-bs-keyboard="false" tabindex="-1"
    aria-labelledby="staticBackdropLabel" aria-hidden="true">
    <div class="modal-dialog" style="margin-left: 16%;">
        <div class="modal-content" style="width: 180%;">
            <div class="modal-header" style="background-color: #76533E;">
                <h1 class="modal-title fs-5 text-white" id="staticBackdropLabel">Nova pesquisa</h1>
            </div>
            <div class="modal-body text-white" style="background-color: #292F33;">
                <div class="alert alert-warning" id="alert-erro-modal" role="alert" *ngIf="mensagemDeErroModal">
                    <i class="bi bi-exclamation-circle"></i>
                    {{mensagemDeErroModal}}
                </div>
                <div class="alert alert-info" id="alert-sucesso-modal" role="alert" *ngIf="mensagemDeSucessoModal">
                    <i class="bi bi-check-circle"></i>
                    {{mensagemDeSucessoModal}}
                </div>
                <form #formularioNovaPesquisa="ngForm">
                    <div class="mb-3">
                        <label for="titulo" class="form-label">Titulo*</label>
                        <input type="text" maxlength="255" class="form-control" id="titulo"
                            placeholder="Titulo da pesquisa..." name="titulo" #titulo="ngModel" ngModel required>
                    </div>
                    <div class="mb-3">
                        <label for="Descricao" class="form-label">Descrição*</label>
                        <textarea maxlength="65535" class="form-control" id="descricao" rows="10"
                            placeholder="Descrição da pesquisa..." name="descricao" #descricao="ngModel" ngModel
                            required></textarea>
                    </div>
                </form>
            </div>
            <div class="modal-footer" style="background-color: #76533E;">
                <button type="button" class="btn btn-dark" #fechaNovaPesquisa data-bs-dismiss="modal"
                    (click)="formularioNovaPesquisa.reset()">
                    <i class="bi bi-x-circle"></i>
                    Cancelar
                </button>
                <button type="button" class="btn btn-success" id="salvarPesquisaBtn"
                    [disabled]="mensagemDeSucessoModal != null || !formularioNovaPesquisa.valid"
                    (click)="novaPesquisa()">
                    <i class="bi bi-clipboard-plus"></i>
                    Salvar
                </button>
            </div>
        </div>

    </div>
</div>

<!-- Atualiza pesquisa -->
<div class="modal fade" id="modalAtualizaPesquisa" data-bs-backdrop="static" data-bs-keyboard="false" tabindex="-1"
    aria-labelledby="staticBackdropLabel" aria-hidden="true">
    <div class="modal-dialog" style="margin-left: 16%;">
        <div class="modal-content" style="width: 180%;">
            <div class="modal-header" style="background-color: #76533E;">
                <h1 class="modal-title fs-5 text-white" id="staticBackdropLabel">Atualizar pesquisa</h1>
            </div>
            <div class="modal-body text-white" style="background-color: #292F33;">
                <div class="alert alert-warning" role="alert" *ngIf="mensagemDeErroModal">
                    <i class="bi bi-exclamation-circle"></i>
                    {{mensagemDeErroModal}}
                </div>
                <div class="alert alert-info" role="alert" *ngIf="mensagemDeSucessoModal">
                    <i class="bi bi-check-circle"></i>
                    {{mensagemDeSucessoModal}}
                </div>
                <form>
                    <div class="mb-3">
                        <label for="status" class="form-label">Status*</label>
                        <select maxlength="255" class="form-control" id="status" placeholder="Selecione o status"
                            name="status" [(ngModel)]="novo_status_pesquisa">
                            <option *ngFor="let opcao of opcao_status_pesquisa" [ngValue]="opcao">{{ opcao }}</option>
                        </select>
                    </div>
                    <div class="mb-3">
                        <label for="titulo" class="form-label">Titulo*</label>
                        <input type="text" maxlength="255" class="form-control" id="titulo"
                            placeholder="Titulo da pesquisa..." name="titulo" [(ngModel)]="novo_titulo_pesquisa">
                    </div>
                    <div class="mb-3">
                        <label for="Descricao" class="form-label">Descrição*</label>
                        <textarea maxlength="65535" class="form-control" id="descricao" rows="10"
                            placeholder="Descrição da pesquisa..." name="descricao"
                            [(ngModel)]="nova_descricao_pesquisa">
                        </textarea>
                    </div>
                </form>
            </div>
            <div class="modal-footer" style="background-color: #76533E;">
                <button type="button" #fechaEditaPesquisa
                    (click)="novo_titulo_pesquisa = null;nova_descricao_pesquisa = null" class="btn btn-dark"
                    data-bs-dismiss="modal">
                    <i class="bi bi-x-circle"></i>
                    Cancelar
                </button>
                <button type="button" class="btn btn-primary" id="atualizarPesquisaBtn"
                    [disabled]="novo_titulo_pesquisa == null || nova_descricao_pesquisa == null || mensagemDeSucessoModal != null"
                    (click)="atualizaPesquisa()">
                    <i class="bi bi-arrow-repeat"></i>
                    Atualizar
                </button>
            </div>
        </div>

    </div>
</div>

<!-- Deleta pesquisa -->
<div class="modal fade" id="modalDeletaPesquisa" data-bs-backdrop="static" data-bs-keyboard="false" tabindex="-1"
    aria-labelledby="staticBackdropLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header" style="background-color: #76533E;">
                <h1 class="modal-title fs-5 text-white" id="staticBackdropLabel">Deletar pesquisa</h1>
            </div>
            <div class="modal-body text-white" style="background-color: #292F33;">
                <div class="alert alert-warning" role="alert" *ngIf="mensagemDeErroModal">
                    <i class="bi bi-exclamation-circle"></i>
                    {{mensagemDeErroModal}}
                </div>
                <div class="alert alert-info" id="alert-sucesso-modal" role="alert" *ngIf="mensagemDeSucessoModal">
                    <i class="bi bi-check-circle"></i>
                    {{mensagemDeSucessoModal}}
                </div>
                Confirmar ação?
            </div>
            <div class="modal-footer" style="background-color: #76533E;">
                <button type="button" #fechaDeletaPesquisa class="btn btn-dark" data-bs-dismiss="modal">
                    <i class="bi bi-x-circle"></i>
                    Cancelar
                </button>
                <button type="button" class="btn btn-danger" [disabled]="mensagemDeSucessoModal != null"
                    (click)="deletaPesquisa()">
                    <i class="bi bi-clipboard-x"></i>
                    Confirmar
                </button>
            </div>
        </div>
    </div>
</div>


<!-- Cria requisito -->
<div class="modal fade" id="novoRequisitoModal" data-bs-backdrop="static" data-bs-keyboard="false" tabindex="-1"
    aria-labelledby="staticBackdropLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header" style="background-color: #76533E;">
                <h1 class="modal-title fs-5 text-white" id="staticBackdropLabel">Adicionar requisito</h1>
            </div>
            <div class="modal-body text-white" style="background-color: #292F33;">
                <div class="alert alert-warning" role="alert" *ngIf="mensagemDeErroModal">
                    <i class="bi bi-exclamation-circle"></i>
                    {{mensagemDeErroModal}}
                </div>
                <div class="alert alert-info" id="alerta-sucesso" role="alert" *ngIf="mensagemDeSucessoModal">
                    <i class="bi bi-check-circle"></i>
                    {{mensagemDeSucessoModal}}
                </div>
                <form #formularioNovoRequisito="ngForm">
                    <div class="mb-3">
                        <label for="item" class="form-label">Item</label>
                        <input type="text" class="form-control" id="item" name="item" #item="ngModel" placeholder="Item"
                            ngModel required>
                    </div>
                    <label for="preco" class="form-label">Preço</label>
                    <div class="input-group mb-3">
                        <span class="input-group-text">R$</span>
                        <input type="number" class="form-control" min="0" id="preco" name="preco" #preco="ngModel"
                            ngModel required>
                    </div>
                </form>
            </div>
            <div class="modal-footer" style="background-color: #76533E;">
                <button type="button" class="btn btn-dark" #fechaNovoRequisito data-bs-dismiss="modal"
                    (click)="formularioNovoRequisito.reset()">
                    <i class="bi bi-x-circle"></i>
                    Cancelar
                </button>
                <button type="button" class="btn btn-success" id="salvarRequisito"
                    [disabled]="!formularioNovoRequisito.valid || mensagemDeSucessoModal != null"
                    (click)="novoRequisito()">
                    <i class="bi bi-clipboard-plus"></i>
                    Salvar
                </button>
            </div>
        </div>
    </div>
</div>

<!-- Atualiza requisito -->
<div class="modal fade" id="atualizaRequisitoModal" data-bs-backdrop="static" data-bs-keyboard="false" tabindex="-1"
    aria-labelledby="staticBackdropLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header" style="background-color: #76533E;">
                <h1 class="modal-title fs-5 text-white" id="staticBackdropLabel">Atualizar requisito</h1>
            </div>
            <div class="modal-body text-white" style="background-color: #292F33;">
                <div class="alert alert-warning" role="alert" *ngIf="mensagemDeErroModal">
                    <i class="bi bi-exclamation-circle"></i>
                    {{mensagemDeErroModal}}
                </div>
                <div class="alert alert-info" role="alert" *ngIf="mensagemDeSucessoModal">
                    <i class="bi bi-check-circle"></i>
                    {{mensagemDeSucessoModal}}
                </div>
                <div class="mb-3">
                    <label for="item" class="form-label">Item</label>
                    <input type="text" class="form-control" id="item" [value]="item_requisito" placeholder="Item" [(ngModel)]="item_requisito">
                </div>
                <label for="preco" class="form-label">Preço</label>
                <div class="input-group mb-3">
                    <span class="input-group-text">R$</span>
                    <input type="number" class="form-control" min="0" id="preco" [value]="preco_requisito" [(ngModel)]="preco_requisito">
                </div>
            </div>
            <div class="modal-footer" style="background-color: #76533E;">
                <button type="button" class="btn btn-dark" #fechaAtualizaRequisito data-bs-dismiss="modal"
                    (click)="item_requisito = null; preco_requisito = null;">
                    <i class="bi bi-x-circle"></i>
                    Cancelar
                </button>
                <button type="button" class="btn btn-primary"
                    [disabled]="preco_requisito == null || item_requisito == null || mensagemDeSucessoModal != null"
                    (click)="atualizaRequisito()">
                    <i class="bi bi-pencil-square"></i>
                    Atualizar
                </button>
            </div>
        </div>
    </div>
</div>

<!-- Deleta requisito -->
<div class="modal fade" id="deletaRequisitoModal" data-bs-backdrop="static" data-bs-keyboard="false" tabindex="-1"
    aria-labelledby="staticBackdropLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header" style="background-color: #76533E;">
                <h1 class="modal-title fs-5 text-white" id="staticBackdropLabel">Deletar requisito</h1>
            </div>
            <div class="modal-body text-white" style="background-color: #292F33;">
                <div class="alert alert-warning" role="alert" *ngIf="mensagemDeErroModal">
                    <i class="bi bi-exclamation-circle"></i>
                    {{mensagemDeErroModal}}
                </div>
                <div class="alert alert-info" role="alert" *ngIf="mensagemDeSucessoModal">
                    <i class="bi bi-check-circle"></i>
                    {{mensagemDeSucessoModal}}
                </div>
                Confirmar ação?
            </div>
            <div class="modal-footer" style="background-color: #76533E;">
                <button type="button" #fechaDeletaRequisito class="btn btn-dark" data-bs-dismiss="modal">
                    <i class="bi bi-x-circle"></i>
                    Cancelar
                </button>
                <button type="button" class="btn btn-danger" (click)="deletaRequisito()">
                    <i class="bi bi-clipboard-x"></i>
                    Confirmar
                </button>
            </div>
        </div>
    </div>
</div>


<!-- Associa projetos -->
<div class="modal fade" id="associaProjetoModal" data-bs-backdrop="static" data-bs-keyboard="false" tabindex="-1"
    aria-labelledby="staticBackdropLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header" style="background-color: #76533E;">
                <h1 class="modal-title fs-5 text-white" id="staticBackdropLabel">Lista de projetos</h1>
            </div>
            <div class="modal-body text-white" style="background-color: #292F33;">
                <div class="alert alert-warning" role="alert" *ngIf="mensagemDeErroModal">
                    <i class="bi bi-exclamation-circle"></i>
                    {{mensagemDeErroModal}}
                </div>
                <div class="alert alert-info" role="alert" *ngIf="mensagemDeSucessoModal">
                    <i class="bi bi-check-circle"></i>
                    {{mensagemDeSucessoModal}}
                </div>
                <div *ngIf="carregando_lista_projeto" class="progress" role="progressbar"
                    aria-label="Animated striped example" aria-valuenow="75" aria-valuemin="0" aria-valuemax="100">
                    <div class="progress-bar bg-dark progress-bar-striped progress-bar-animated" style="width: 100%">
                    </div>
                </div>
                <div *ngIf="!carregando_lista_projeto">
                    <label>Lista de projetos</label>
                    <ng-select [items]="lista_projetos_nao_associados" id="projetos" [bindLabel]="'projeto_titulo'"
                        bindValue="id_projeto" [multiple]="true" placeholder="Selecione os projetos"
                        [(ngModel)]="lista_projetos_para_associar">
                    </ng-select>
                </div>
            </div>
            <div class="modal-footer" style="background-color: #76533E;">
                <button type="button" class="btn btn-dark" data-bs-dismiss="modal"
                    (click)="lista_projetos_para_associar = [];limpaMensagens()" #fechaAssociaProjeto>
                    <i class="bi bi-x-circle"></i>
                    Cancelar
                </button>
                <button type="button" class="btn btn-success"
                    [disabled]="lista_projetos_para_associar.length < 1 || mensagemDeSucessoModal != null"
                    (click)="associaProjetoAPesquisa()">
                    <i class="bi bi-journal-plus"></i>
                    Associar
                </button>
            </div>
        </div>
    </div>
</div>

<!-- Desassocia projeto -->
<div class="modal fade" id="desassociaProjetoModal" data-bs-backdrop="static" data-bs-keyboard="false" tabindex="-1"
    aria-labelledby="staticBackdropLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header" style="background-color: #76533E;">
                <h1 class="modal-title fs-5 text-white" id="staticBackdropLabel">Desasociar projeto</h1>
            </div>
            <div class="modal-body text-white" style="background-color: #292F33;">
                <div class="alert alert-warning" role="alert" *ngIf="mensagemDeErroModal">
                    <i class="bi bi-exclamation-circle"></i>
                    {{mensagemDeErroModal}}
                </div>
                <div class="alert alert-info" role="alert" *ngIf="mensagemDeSucessoModal">
                    <i class="bi bi-check-circle"></i>
                    {{mensagemDeSucessoModal}}
                </div>
                Confirmar ação?
            </div>
            <div class="modal-footer" style="background-color: #76533E;">
                <button type="button" #fechaDesassociaProjeto class="btn btn-dark" data-bs-dismiss="modal">
                    <i class="bi bi-x-circle"></i>
                    Cancelar
                </button>
                <button type="button" class="btn btn-danger" (click)="desassociaProjetoAPesquisa()"
                    [disabled]="mensagemDeSucessoModal != null">
                    <i class="bi bi-clipboard-minus"></i>
                    Confirmar
                </button>
            </div>
        </div>
    </div>
</div>


<!-- Associa anotação -->
<div class="modal fade" id="associaAnotacaoModal" data-bs-backdrop="static" data-bs-keyboard="false" tabindex="-1"
    aria-labelledby="staticBackdropLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header" style="background-color: #76533E;">
                <h1 class="modal-title fs-5 text-white" id="staticBackdropLabel">Associar anotação</h1>
            </div>
            <div class="modal-body text-white" style="background-color: #292F33;">
                <div class="alert alert-warning" role="alert" *ngIf="mensagemDeErroModal">
                    <i class="bi bi-exclamation-circle"></i>
                    {{mensagemDeErroModal}}
                </div>
                <div class="alert alert-info" role="alert" *ngIf="mensagemDeSucessoModal">
                    <i class="bi bi-check-circle"></i>
                    {{mensagemDeSucessoModal}}
                </div>
                <div *ngIf="carregando_lista_anotacao" class="progress" role="progressbar"
                    aria-label="Animated striped example" aria-valuenow="75" aria-valuemin="0" aria-valuemax="100">
                    <div class="progress-bar bg-dark progress-bar-striped progress-bar-animated" style="width: 100%">
                    </div>
                </div>
                <div *ngIf="!carregando_lista_anotacao">
                    <label>Lista de anotacoes</label>
                    <ng-select [items]="lista_anotacao_nao_associados" bindLabel="anotacao_titulo" bindValue="id_anotacao"
                        [multiple]="true" placeholder="Selecione as notas" [(ngModel)]="lista_anotacao_para_associar">
                    </ng-select>
                </div>
            </div>
            <div class="modal-footer" style="background-color: #76533E;">
                <button type="button" class="btn btn-dark" data-bs-dismiss="modal" #fechaAssociaAnotacoes
                    (click)="lista_anotacao_para_associar = [];limpaMensagens()">
                    <i class="bi bi-x-circle"></i>
                    Cancelar
                </button>
                <button type="button" class="btn btn-success"
                    [disabled]="lista_anotacao_para_associar.length < 1 || mensagemDeSucessoModal != null"
                    (click)="associarAnotacoes()">
                    <i class="bi bi-journal-plus"></i>
                    Associar
                </button>
            </div>
        </div>
    </div>
</div>

<!-- Desassocia anotação -->
<div class="modal fade" id="desassociaAnotacaoModal" data-bs-backdrop="static" data-bs-keyboard="false" tabindex="-1"
    aria-labelledby="staticBackdropLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header" style="background-color: #76533E;">
                <h1 class="modal-title fs-5 text-white" id="staticBackdropLabel">Desasociar anotação</h1>
            </div>
            <div class="modal-body text-white" style="background-color: #292F33;">
                <div class="alert alert-warning" role="alert" *ngIf="mensagemDeErroModal">
                    <i class="bi bi-exclamation-circle"></i>
                    {{mensagemDeErroModal}}
                </div>
                <div class="alert alert-info" role="alert" *ngIf="mensagemDeSucessoModal">
                    <i class="bi bi-check-circle"></i>
                    {{mensagemDeSucessoModal}}
                </div>
                Confirmar ação?
            </div>
            <div class="modal-footer" style="background-color: #76533E;">
                <button type="button" #fechaDesassociaAnotacoes class="btn btn-dark" data-bs-dismiss="modal">
                    <i class="bi bi-x-circle"></i>
                    Cancelar
                </button>
                <button type="button" class="btn btn-danger" (click)="desassociarAnotacoes()">
                    <i class="bi bi-clipboard-minus"></i>
                    Confirmar
                </button>
            </div>
        </div>
    </div>
</div>


<!-- View projeto -->
<div class="modal fade" id="detalhesProjetoModal" data-bs-keyboard="false" tabindex="-1" aria-labelledby="staticBackdropLabel"
    aria-hidden="true">
    <div class="modal-dialog" style="margin-left: 16%;">
        <div class="modal-content" style="width: 180%;">
            <div class="modal-header" style="background-color: #76533E;">
                <h1 class="modal-title fs-5 text-white" id="staticBackdropLabel">
                    #PJT{{detalhes_projeto.id_projeto}} - {{detalhes_projeto.projeto_titulo}}</h1>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body text-white" style="background-color: #292F33;">
                <p class="note-date">Criado em: {{detalhes_projeto.data_criacao}} | Status: {{detalhes_projeto.status}}</p>
                <hr>
                <p>{{detalhes_projeto.projeto_descricao}}</p>
            </div>
        </div>
    </div>
</div>

<!-- View anotacao -->
<div class="modal fade" id="detalhesAnotacaoModal" data-bs-keyboard="false" tabindex="-1" aria-labelledby="staticBackdropLabel"
    aria-hidden="true">
    <div class="modal-dialog" style="margin-left: 16%;">
        <div class="modal-content" style="width: 180%;">
            <div class="modal-header" style="background-color: #76533E;">
                <h1 class="modal-title fs-5 text-white" id="staticBackdropLabel">
                    #ANT{{detalhes_anotacao.id_anotacao}}-{{detalhes_anotacao.anotacao_titulo}}</h1>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body text-white" style="background-color: #292F33;">
                <p class="note-date">Criado em: {{detalhes_anotacao.data_criacao}}</p>
                <hr>
                <p>{{detalhes_anotacao.anotacao_descricao}}</p>
            </div>
        </div>
    </div>
</div>

<app-spinner *ngIf="carregando"></app-spinner>

<div class="bg-dark ms-5 me-5 mb-5" style="border-radius: 10px;" *ngIf="!carregando">

    <nav class="navbar" style="border: 1px solid #76533E;border-radius: 10px;">
        <div class="container-fluid">

            <form class="d-flex" role="search" #formularioBuscaPesquisa="ngForm">

                <button class="btn dropdown-toggle btn-outline me-2" id="filtro" type="button" data-bs-toggle="dropdown"
                    aria-expanded="false">
                    <i class="bi bi-funnel"></i>
                </button>

                <ul class="dropdown-menu" style="background-color: #2B2B2B;">

                    <li>
                        <a class="dropdown-item btn-outline" type="button">
                            <div class="form-check">
                                <input [(ngModel)]="filtroSelecionado" (click)="this.formularioBuscaPesquisa.reset"
                                    class="form-check-input" value="titulo" type="radio" name="titulo" id="titulo">
                                <label (click)="this.formularioBuscaPesquisa.reset" class="form-check-label custom-text"
                                    for="titulo">
                                    <i class="bi bi-clipboard"></i>
                                    Titulo
                                </label>
                            </div>
                        </a>
                    </li>
                    <li>
                        <hr class="dropdown-divider">
                    </li>
                    <li>
                        <a class="dropdown-item btn-outline" type="button">
                            <div class="form-check">
                                <input [(ngModel)]="filtroSelecionado" (click)="this.formularioBuscaPesquisa.reset"
                                    class="form-check-input" value="id" type="radio" name="id" id="id">
                                <label (click)="this.formularioBuscaPesquisa.reset" class="form-check-label custom-text"
                                    for="id">
                                    <i class="bi bi-hash"></i>
                                    Id
                                </label>
                            </div>
                        </a>
                    </li>

                </ul>
                <div class="input-group" *ngIf="filtroSelecionado == 'id'">
                    <span class="input-group-text" id="basic-addon1">#PQS</span>
                    <input class="form-control me-2" style="width: 200px;" min="1" type="number"
                        placeholder="Pesquisar id" aria-label="Search" id="search_input" name="search_input"
                        #search_input="ngModel" ngModel>
                </div>
                <input class="form-control me-2" style="width: 230px;" list="noteTitles" type="text"
                    placeholder="Pesquisar titulo" aria-label="Search" id="search_input" name="search_input"
                    #search_input="ngModel" ngModel *ngIf="filtroSelecionado == 'titulo'">
                <button class="btn btn-outline-success" id="search_btn" (click)="filtro();index_pesquisa = null">
                    <i class="bi bi-binoculars"></i>
                </button>
            </form>
            <h3 class="title">Pesquisas</h3>
            <button class="btn btn-outline" id="novaPesquisa" data-bs-toggle="modal" data-bs-target="#modalNovaPesquisa">
                <i class="bi bi-clipboard-plus"></i>
                Nova pesquisa
            </button>

        </div>
    </nav>

    <div class="alert alert-warning" role="alert" *ngIf="mensagemDeErro">
        <i class="bi bi-exclamation-circle"></i>
        {{mensagemDeErro}}
    </div>
    <div class="alert alert-info" role="alert" *ngIf="mensagemDeSucesso">
        <i class="bi bi-check-circle"></i>
        {{mensagemDeSucesso}}
    </div>

    <div class="container-fluid d-flex justify-content-center align-items-center p-5" style="color: #E28247;" *ngIf="dadosPesquisa?.content == undefined || dadosPesquisa?.content.length < 1">
        <img src="/assets/imgs/SemConteudo.svg" alt="Nada encontrado" class="img-fluid"
            style="width: 40%; height: auto;">
    </div>

    <div class="d-flex flex-row" style="color: #E28247;" *ngIf="dadosPesquisa?.content != undefined || dadosPesquisa?.content.length < 1">

        <div class="p-2" id="list-menu">

            <div *ngIf="carregandoLista" class="progress" role="progressbar" aria-label="Animated striped example"
                aria-valuenow="75" aria-valuemin="0" aria-valuemax="100">
                <div class="progress-bar bg-dark progress-bar-striped progress-bar-animated" style="width: 100%"></div>
            </div>

            <nav aria-label="Page navigation" *ngIf="dadosPesquisa.totalPages > 1 && pesquisaTitulo == false">
                <ul class="pagination justify-content-center">
                    <!-- Previous normal Page -->
                    <li class="page-item" [class.disabled]="dadosPesquisa.first">
                        <a class="page-link" (click)="listaDePesquisas(dadosPesquisa.number - 1);index_pesquisa = null">
                            <span aria-hidden="true">&laquo;</span>
                        </a>
                    </li>

                    <!-- Page Numbers -->
                    <li class="page-item" *ngFor="let pageIndex of pegaArrayDePaginas(dadosPesquisa.totalPages)">
                        <a class="page-link" [class.active]="pageIndex === dadosPesquisa.number"
                            (click)="listaDePesquisas(pageIndex);index_pesquisa = null">
                            {{ pageIndex + 1 }}
                        </a>
                    </li>

                    <!-- Next normal Page -->
                    <li class="page-item" [class.disabled]="dadosPesquisa.last">
                        <a class="page-link" (click)="listaDePesquisas(dadosPesquisa.number + 1);index_pesquisa = null">
                            <span aria-hidden="true">&raquo;</span>
                        </a>
                    </li>

                </ul>
            </nav>

            <nav aria-label="Page navigation" *ngIf="dadosPesquisa.totalPages > 1 && pesquisaTitulo == true">
                <ul class="pagination justify-content-center">
                    <!-- Previous normal Page -->
                    <li class="page-item" [class.disabled]="dadosPesquisa.first">
                        <a class="page-link"
                            (click)="pesquisaPeloTitulo(dadosPesquisa.number - 1);index_pesquisa = null">
                            <span aria-hidden="true">&laquo;</span>
                        </a>
                    </li>

                    <!-- Page Numbers -->
                    <li class="page-item" *ngFor="let pageIndex of pegaArrayDePaginas(dadosPesquisa.totalPages)">
                        <a class="page-link" [class.active]="pageIndex === dadosPesquisa.number"
                            (click)="pesquisaPeloTitulo(pageIndex);index_pesquisa = null">
                            {{ pageIndex + 1 }}
                        </a>
                    </li>

                    <!-- Next normal Page -->
                    <li class="page-item" [class.disabled]="dadosPesquisa.last">
                        <a class="page-link"
                            (click)="pesquisaPeloTitulo(dadosPesquisa.number + 1);index_pesquisa = null">
                            <span aria-hidden="true">&raquo;</span>
                        </a>
                    </li>

                </ul>
            </nav>

            <ul class="list-group" *ngIf="!carregandoLista" id="lista-pesquisa">
                <li
                    (click)="conteudoPesquisa = dados;index_pesquisa = i;conta_os_dados_grafico_requisito_e_apresenta(dados.requisito);conta_os_dados_grafico_projeto_e_apresenta(dados.projeto)"
                    value="{{dados.pesquisa_titulo}}" [class.custom-border]="index_pesquisa == i"
                    class="list-group-item list-group-item-action" type="button"
                    *ngFor="let dados of dadosPesquisa.content;let i = index">
                    <button [disabled]="index_pesquisa != i" class="btn btn-outline-danger me-1" data-bs-toggle="modal"
                        data-bs-target="#modalDeletaPesquisa"
                        [id]="'deleta_pesquisa_'+dados.id_pesquisa"
                        (click)="id_pesquisa = dados.id_pesquisa;index_pesquisa = i">
                        <i class="bi bi-trash"></i>
                    </button>
                    #PQS{{dados.id_pesquisa}} - {{dados.pesquisa_titulo}}
                </li>
            </ul>
        </div>

        <div class="p-2 container-fluid conteudo" id="conteudo_pesquisa">
            <div *ngIf="conteudoPesquisa != null">
                <h3 class="text-center" id="pesquisa_titulo">
                    #PQS{{conteudoPesquisa.id_pesquisa}} - {{conteudoPesquisa.pesquisa_titulo}}
                    <button
                        (click)="novo_titulo_pesquisa = conteudoPesquisa.pesquisa_titulo; nova_descricao_pesquisa = conteudoPesquisa.pesquisa_descricao; novo_status_pesquisa = conteudoPesquisa.status; id_pesquisa = conteudoPesquisa.id_pesquisa;limpaMensagens()"
                        class="btn btn-outline-primary" id="atualiza_pesquisa" data-bs-toggle="modal" data-bs-target="#modalAtualizaPesquisa">
                        <i class="bi bi-pencil-square"></i>
                    </button>
                </h3>
                <h6 class="note-date text-center">Criado em: {{conteudoPesquisa.data_criacao}} | Status: {{conteudoPesquisa.status}}</h6>
                <hr>
                <h4>Descrição</h4>
                <p id="pesquisa_descricao">{{conteudoPesquisa.pesquisa_descricao}}</p>
                <hr>
                <h4>
                    Requisitos
                    <button class="btn btn-outline-success ms-2" (click)="id_pesquisa = conteudoPesquisa.id_pesquisa"
                        data-bs-toggle="modal" id="novo_requisito_btn" data-bs-target="#novoRequisitoModal">
                        <i class="bi bi-clipboard-plus"></i>
                    </button>
                </h4>
                <table class="table table-dark table-bordless table-hover tabela_requisito" *ngIf="conteudoPesquisa.requisito.length > 0">
                    <thead>
                        <tr>
                            <th scope="col">Item</th>
                            <th scope="col">Preço</th>
                            <th scope="col">Criado em</th>
                            <th scope="col" class="text-center">Atualiza</th>
                            <th scope="col" class="text-center">Deleta</th>
                        </tr>
                    </thead>
                    <tbody id="tabela_requisito">
                        <tr *ngFor="let requisito of conteudoPesquisa.requisito;let i = index">
                            <td>
                                {{requisito.item}}
                            </td>
                            <td>
                                {{requisito.preco | currency : 'R$' }}
                            </td>
                            <td>
                                {{requisito.data_criacao}}
                            </td>
                            <td class="text-center">
                                <button class="btn btn-outline-primary me-1" data-bs-toggle="modal"
                                    data-bs-target="#atualizaRequisitoModal"
                                    (click)="id_requisito = requisito.id_requisito;item_requisito = requisito.item;preco_requisito = requisito.preco;index_requisito = i;">
                                    <i class="bi bi-pencil-square"></i>
                                </button>
                            </td>
                            <td class="text-center">
                                <button class="btn btn-outline-danger me-1" data-bs-toggle="modal"
                                    data-bs-target="#deletaRequisitoModal"
                                    (click)="id_requisito = requisito.id_requisito;index_requisito = i;">
                                    <i class="bi bi-trash"></i>
                                </button>
                            </td>
                        </tr>
                        <tr>
                            <td>
                                Total
                            </td>
                            <td>
                                {{valor_total_requisito | currency : 'R$' }}
                            </td>
                            <td></td>
                            <td></td>
                            <td></td>
                        </tr>
                    </tbody>
                </table>
                <apx-chart 
                    id="graficoMonetario" 
                    *ngIf="conteudoPesquisa.requisito.length > 0" 
                    [series]="chartOptionsRequisitos.series"
                    [chart]="chartOptionsRequisitos.chart" 
                    [labels]="chartOptionsRequisitos.labels"
                    [responsive]="chartOptionsRequisitos.responsive" 
                    [dataLabels]="chartOptionsRequisitos.dataLabels"
                    [tooltip]="chartOptionsRequisitos.tooltip" 
                    [legend]="chartOptionsRequisitos.legend" 
                />
                <hr>
                <h4>
                    Projetos associados
                    <button class="btn btn-outline-success ms-2" id="associaProjeto"
                        (click)="id_pesquisa = conteudoPesquisa.id_pesquisa; projetosNaoAssociados()"
                        data-bs-toggle="modal" data-bs-target="#associaProjetoModal">
                        <i class="bi bi-folder-plus"></i>
                    </button>
                </h4>
                <table class="table table-dark table-bordless table-hover" *ngIf="conteudoPesquisa.projeto.length > 0">
                    <thead>
                        <tr>
                            <th scope="col">
                                ID
                            </th>
                            <th scope="col">
                                Titulo
                            </th>
                            <th scope="col">
                                Status
                            </th>
                            <th scope="col">Criado em</th>
                            <th scope="col" class="text-center">
                                Desassociar
                            </th>
                        </tr>
                    </thead>
                    <tbody id="tabela_projetos">
                        <tr *ngFor="let projeto of conteudoPesquisa.projeto;let i = index">
                            <td>
                                #PJT{{projeto.id_projeto}}
                            </td>
                            <td>
                                <button class="btn btn-link text-decoration-none" (click)="detalhes_projeto = projeto"
                                    data-bs-toggle="modal" data-bs-target="#detalhesProjetoModal">
                                    {{projeto.projeto_titulo}}
                                </button>
                            </td>
                            <td>
                                {{projeto.status}}
                            </td>
                            <td>
                                {{projeto.data_criacao}}
                            </td>
                            <td class="text-center">
                                <button class="btn btn-outline" data-bs-toggle="modal"
                                    data-bs-target="#desassociaProjetoModal"
                                    (click)="id_projeto = projeto.id_projeto; id_pesquisa = conteudoPesquisa.id_pesquisa;index_projeto = i">
                                    <i class="bi bi-folder-minus"></i>
                                </button>
                            </td>
                        </tr>
                    </tbody>
                </table>
                <apx-chart 
                    *ngIf="conteudoPesquisa.projeto.length > 0"
                    id="graficoStatus"
                    [series]="chartOptionsProjetos.series" 
                    [chart]="chartOptionsProjetos.chart"
                    [labels]="chartOptionsProjetos.labels"
                    [responsive]="chartOptionsProjetos.responsive"
                    [dataLabels]="chartOptionsProjetos.dataLabels" 
                    [tooltip]="chartOptionsProjetos.tooltip"
                    [legend]="chartOptionsProjetos.legend"
                />
                <hr>
                <h4>
                    Anotações associadas
                    <button class="btn btn-outline-success ms-2" id="associaAnotacao"
                        (click)="id_pesquisa = conteudoPesquisa.id_pesquisa;anotacoesNaoAssociadas();limpaMensagens()"
                        data-bs-toggle="modal" data-bs-target="#associaAnotacaoModal">
                        <i class="bi bi-bookmark-plus"></i>
                    </button>
                </h4>
                <table class="table table-dark table-bordless table-hover"
                    *ngIf="!conteudoPesquisa.anotacao == undefined || conteudoPesquisa.anotacao.length > 0">
                    <thead>
                        <tr>
                            <th scope="col">
                                ID
                            </th>
                            <th scope="col">
                                Titulo
                            </th>
                            <th scope="col">
                                Criado em
                            </th>
                            <th scope="col" class="text-center">
                                Desassociar
                            </th>
                        </tr>
                    </thead>
                    <tbody id="tabela_anotacao">
                        <tr *ngFor="let anotacao of conteudoPesquisa.anotacao;let i = index">
                            <td>
                                #ANT{{anotacao.id_anotacao}}
                            </td>
                            <td>
                                <button class="btn btn-link text-decoration-none" (click)="detalhes_anotacao = anotacao"
                                    data-bs-toggle="modal" data-bs-target="#detalhesAnotacaoModal">
                                    {{anotacao.anotacao_titulo}}
                                </button>
                            </td>
                            <td>
                                {{anotacao.data_criacao}}
                            </td>
                            <td class="text-center">
                                <button class="btn btn-outline" data-bs-toggle="modal"
                                    data-bs-target="#desassociaAnotacaoModal"
                                    (click)="id_anotacao = anotacao.id_anotacao; id_pesquisa = conteudoPesquisa.id_pesquisa;index_anotacao = i">
                                    <i class="bi bi-bookmark-dash"></i>
                                </button>
                            </td>
                        </tr>
                    </tbody>
                </table>
            </div>

        </div>

    </div>

</div>